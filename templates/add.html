<!DOCTYPE html>
<html>
<head>
    <title>Add Employee</title>
    <link rel="stylesheet" href="/static/addemp.css">
</head>
<body>
    <nav>
        <h2 class="navhd">ADD NEW EMPLOYEE & SALARY DETAILS</h2>
    </nav>
    <form id="salaryForm" method="POST">
        <div class="insideform">
            <h2>Add Employee</h2>
            Name: <input type="text" name="name" placeholder="Enter your name" required><br><br>
            Salary: <input type="number" id="sal2" readonly name="salary"><br><br>
            <!-- deptid: <input type="number" name="deptid" required><br><br> -->
            Department Name: <select id="depid" name="deptid">
                {% for id, name in dropdown_data %}
                <option value="{{ id }}">{{ id }} - {{ name }}</option>
                {% endfor %}
            </select><br><br>
            
            DOB: <input type="date" name="dob" required><br><br>
            Aaadhar: <input type="number" min ="100000000000" max="999999999999" required title="Aadhaar should be 12 digits" 
             name="aadhaar" placeholder="Enter Your 12 digit Aadhaar number" required ><br><br>
             <p class="error">*Aadhaar should be 12 digits</p>
            Active Status: <select id="activestatus" name="activestatus">
                <option value="Active">Active</option>
                <option value="Deleted">Deleted</option>
                <option value="Terminated">Terminated</option>
            </select><br><br>
            <button type="submit">Save</button>
        </div>
        <div class="insideform">
        <h2>Add Salary Breakup</h2>
        Basic Salary: <input class="calc-input" type="number" name="bssal" ><br><br>
        House rent Allowance: <input class="calc-input" type="number" name="hra"><br><br>
        Leave travel Allowance: <input class="calc-input" type="number" name="lta"><br><br>
        Personal Allowance: <input class="calc-input" type="number" name="pa"><br><br>
        City Allowance: <input class="calc-input" type="number" name="ca"><br><br>
        performance Pay: <input class="calc-input" type="number" name="pp"><br><br>
        Total Salary: <input id="total" type="number" readonly name="ts"><br><br>
        
        </div>
    </form>

<script>
    
    document.addEventListener('DOMContentLoaded', () => {
        const form = document.getElementById('salaryForm');
        const inputs = form.querySelectorAll('.calc-input');
        const totalEl = document.getElementById('total'); // could be an input or a span
        const sal2 = document.getElementById('sal2');

        function updateTotal() {
            let sum = 0;
            inputs.forEach(inp => {
                const v = parseFloat(inp.value);
                if (!Number.isNaN(v)) sum += v;
            });
            if (totalEl.tagName.toLowerCase() === 'input') {
                totalEl.value = sum;
                sal2.value = sum;
            } else {
                totalEl.textContent = sum;
                sal2.textContent = sum;
            }
        }

        // Update total on input for all current and future inputs with class 'calc-input'
        form.addEventListener('input', (e) => {
            if (e.target && e.target.classList && e.target.classList.contains('calc-input')) {
                updateTotal();
            }
        });

        // Initial calculation
        updateTotal();
    });
</script>

</body>
</html>