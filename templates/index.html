<!DOCTYPE html>
<html>
<head>
    <title>Employee Management</title>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <header class="navbar" role="navigation" aria-label="Main navigation">
    <!-- Left: Logo + Brand Name -->
    <div class="brand" aria-label="Brand">
      <div class="logo" aria-label="EM Logo">EM</div>
      <span class="brand-name">EMPLOYEE MANAGER</span>
    </div>

    <!-- Right: Action Buttons -->
    <nav class="nav-actions" aria-label="User actions">
      <a href="/add" class="btn">Add Employee</a>
      <a href="/department" class="btn" target="_blank">Manage Department</a>
    </nav>
  </header>
<div class="dlbtn">
  <div class="hdtag-btn">
    <h2 class="headempdtl">Employee Details</h2>
  </div>
  <div class="dltbtn-btn">
    <a href="/download_pdf" class="dltbtn" style="margin:10px;">Download PDF</a>
  </div>
</div>
<div id="tablediv">
<table id="dataTable">
    <thead>
    <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Salary</th>
        <th>Department</th>
        <th>Department ID</th>
        <th>DOB Of Employee</th>
        <th>Aadhaar Number</th>
        <th>Active Status</th>
        <th>Actions</th>
        
    </tr>
    </thead>
    <tbody>
    {% for emp in employees %}
    <tr>
        <td>{{ emp[0] }}</td>
        <td>{{ emp[1] }}</td>
        <td>{{ emp[2] }}</td>
        <td>{{ emp[3] }}</td>
        <td>{{ emp[4] }}</td>
        <td>{{ emp[5] }}</td>
        <td>{{ emp[6] }}</td>
        <td>{{ emp[7] }}</td>
        <td>
            <button class="btn btn-info btn-sm view-btn" id="vwbtn"
                data-bs-toggle="modal"
                data-bs-target="#viewModal"
                data-name="{{ emp[1] }}"
                data-bssal="{{ emp[8] }}"
                data-hra="{{ emp[9] }}"
                data-lta="{{ emp[10] }}"
                data-pa="{{ emp[11] }}"
                data-ca="{{ emp[12] }}"
                data-pp="{{ emp[13] }}"
                data-ts="{{ emp[14] }}">
                View
            </button> |
            <a href="/edit/{{ emp[0] }}" class="btn1">Edit</a> |
            <a href="/delete/{{ emp[0] }}" class="btn1" onclick="return confirm('Delete this employee?')">Delete</a>
        </td>
    </tr>
    {% endfor %}
    </tbody>
</table>
</div>
<div class="pagebtn">
  <div>
  </div>
  <div class="pagination" id="pagination"></div>
</div>

<!-- # Employee View Modal -->
<div class="modal fade" id="viewModal" tabindex="-1" aria-labelledby="viewModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title" id="viewModalLabel">Salary Details</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <table class="table table-bordered">
            <tr><th>Name</th><td id="emp_name"></td></tr>
            <tr><th>Basic Salary</th><td id="Basic_sal"></td></tr>
            <tr><th>House rent Allowance</th><td id="HR_Alwc"></td></tr>
            <tr><th>Leave travel Allowance</th><td id="lt_Alwc"></td></tr>
            <tr><th>Personal Allowance</th><td id="Per_Alwc"></td></tr>
            <tr><th>City Allowance</th><td id="City_alwc"></td></tr>
            <tr><th>performance Pay</th><td id="perf_Pay"></td></tr>
            <tr><th>Total Salary</th><td id="Total"></td></tr>
        </table>
      </div>
      <div class="modal-footer">
        <button type="button" class="clsbtn" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const viewButtons = document.querySelectorAll('.view-btn');
    viewButtons.forEach(btn => {
        btn.addEventListener('click', function() {
            document.getElementById('emp_name').innerText = this.dataset.name;
            document.getElementById('Basic_sal').innerText = this.dataset.bssal;
            document.getElementById('HR_Alwc').innerText = this.dataset.hra;
            document.getElementById('lt_Alwc').innerText = this.dataset.lta;
            document.getElementById('Per_Alwc').innerText = this.dataset.pa;
            document.getElementById('City_alwc').innerText = this.dataset.ca;
            document.getElementById('perf_Pay').innerText = this.dataset.pp;
            document.getElementById('Total').innerText = this.dataset.ts;
        });
    });
});
</script>

<script>
const rowsPerPage = 5;
const table = document.getElementById("dataTable");
const tbody = table.querySelector("tbody");
const rows = Array.from(tbody.querySelectorAll("tr"));
const totalPages = Math.ceil(rows.length / rowsPerPage);
const pagination = document.getElementById("pagination");
 
function showPage(page) {
  const start = (page - 1) * rowsPerPage;
  const end = start + rowsPerPage;
  rows.forEach((row, index) => {
    row.style.display = (index >= start && index < end) ? "" : "none";
  });
 
  // Update active button
  document.querySelectorAll(".pagination button").forEach(btn => btn.classList.remove("active"));
  document.getElementById(`page${page}`).classList.add("active");
}
 
// Create pagination buttons
for (let i = 1; i <= totalPages; i++) {
  const button = document.createElement("button");
  button.textContent = i;
  button.id = `page${i}`;
  button.addEventListener("click", () => showPage(i));
  pagination.appendChild(button);
}
 
// Show first page initially
showPage(1);
</script>

<footer>
  <h6>Made by The Neural Striker</h6>
</footer>
</body>
</html>